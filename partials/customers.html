<!-- Adapted by Al Ramsey for SWEN 651 -->
<form name="form">

        <table class="table table-striped table-bordered responsive">
        <thead>
        <th>Customer Name&nbsp;</th>
        <th>Email&nbsp;</th>
        <th>Address&nbsp;</th>
        <th>City&nbsp;</th>
        <th>Country&nbsp;</th>
        <th class="col-md-2">Action&nbsp;</th>

        </thead>
        <tbody>
            <tr ng-repeat="customer in customers" ng-show="customers.length > 0">

                    <!-- replace with a directive at some point -->

                    <td ng-hide="customer.isEditing">{{customer.customerName}}</td>
                    <td ng-hide="customer.isEditing">{{customer.email}}</td>
                    <td ng-hide="customer.isEditing">{{customer.address}}</td>
                    <td ng-hide="customer.isEditing">{{customer.city}}</td>
                    <td ng-hide="customer.isEditing">{{customer.country}}</td>
                    <td ng-hide="customer.isEditing">
                        <div class="btn-group">
                        <button ng-click="customer.isEditing=true" class="btn btn-warning">Edit</button>
                        <button ng-click="deleteCustomer(customer, $index)" class="btn btn-danger">Delete</button>
                        </div>
                    </td>

                    <td ng-show="customer.isEditing"><input ng-model="customer.customerName"></td>
                    <td ng-show="customer.isEditing"><input ng-model="customer.email"></td>
                    <td ng-show="customer.isEditing"><input ng-model="customer.address"></td>
                    <td ng-show="customer.isEditing"><input ng-model="customer.city"></td>
                    <td ng-show="customer.isEditing"><input ng-model="customer.country"></td>
                    <td ng-show="customer.isEditing"><div class="btn-group">
                        <button ng-click="updateCustomer(customer, $index); customer.isEditing=false;" class="btn btn-success">Save</button>
                        <button ng-click="refresh();" class="btn btn-normal">Cancel</button>
                        <button ng-click="deleteCustomer(customer, $index)" class="btn btn-danger">Delete</button></div>
                    </td>

            </tr>
            <tr>
                    <td><input ng-model="newcustomer.customerName" class= "form-control" placeholder="Enter Name"></td>
                    <td>
                        <input type="email" name="email" ng-model="newcustomer.email" class="form-control" placeholder="Enter Email" ng-pattern='/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/' required/>
                            <div role="alert">
                              <span class="error" ng-if="form.email.$error.required">
                                Required!</span>
                            </div>
                    </td>
                    <td><input ng-model="newcustomer.address" class= "form-control" placeholder="Enter Address"></td>
                    <td><input ng-model="newcustomer.city" class= "form-control" placeholder="Enter City"></td>
                    <td><input ng-model="newcustomer.country" class= "form-control" placeholder="Enter Country"></td>
                    <td><div class="btn-group">
                        <button ng-click="insertCustomer(newcustomer); customers.push(newcustomer); newcustomer={}; refresh();" class="btn btn-success" ng-disabled="form.$invalid">Add</button>
                        <button ng-click="refresh();" class="btn btn-normal">Cancel</button>
                    </div>
                    </td>

            </tr>

        </tbody>
        </table>

    <div class="col-md-12" ng-show="customers.length == 0">
        <div class="col-md-12">
            <h4>No customer records found. Enter record details and Click Add.</h4>
        </div>
    </div>
</form>